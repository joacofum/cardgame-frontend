{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { v1 as uuidv1 } from 'uuid';\nlet NewGameComponent = class NewGameComponent {\n  constructor(api, auth, socket, router) {\n    this.api = api;\n    this.auth = auth;\n    this.socket = socket;\n    this.router = router;\n    this.form = new FormGroup({\n      jugador: new FormControl()\n    });\n    this.juegoId = uuidv1();\n    api.getJugadores().subscribe(jugadores => {\n      this.jugadores = jugadores;\n    });\n    this.socket.open(this.juegoId);\n  }\n\n  ngOnInit() {\n    this.socket.subscribe(event => {\n      console.log(event);\n\n      if (event.type == \"cardgame.juegocreado\") {\n        this.router.navigate(['list']);\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    this.socket.close();\n  }\n\n  onSubmit() {\n    const jugadores = {};\n    this.form.value.jugador.forEach(user => {\n      jugadores[user.uid] = user.alias;\n    });\n    this.api.crearJuego({\n      jugadorPrincipalId: this.auth.user.uid,\n      juegoId: this.juegoId,\n      jugadores: jugadores\n    }).subscribe();\n  }\n\n};\nNewGameComponent = __decorate([Component({\n  selector: 'app-new-game',\n  templateUrl: './new-game.component.html',\n  styleUrls: ['./new-game.component.scss']\n})], NewGameComponent);\nexport { NewGameComponent };","map":null,"metadata":{},"sourceType":"module"}