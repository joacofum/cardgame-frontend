{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet ListGameComponent = class ListGameComponent {\n  constructor(api, authService, ws, router) {\n    this.api = api;\n    this.authService = authService;\n    this.ws = ws;\n    this.router = router;\n    this.displayedColumns = ['id', 'cantidad', 'iniciado', 'accion', 'eliminar'];\n    this.dataSource = [];\n  }\n\n  ngOnDestroy() {\n    this.ws.close();\n  }\n\n  ngOnInit() {\n    this.api.getMisJuegos(this.authService.user.uid).subscribe(elements => {\n      this.dataSource = elements.filter(el => !el.finalizado);\n    });\n  }\n\n  entrar(id) {\n    this.router.navigate(['board', id]);\n  }\n\n  iniciar(id) {\n    this.ws.connect(id);\n    this.ws.subscribe(event => {\n      console.log(event);\n\n      if (event.type == 'cardgame.tablerocreado') {\n        this.api.crearRonda({\n          juegoId: id,\n          tiempo: 10,\n          jugadores: event.jugadorIds.map(it => it.uuid)\n        }).subscribe();\n      }\n\n      if (event.type == 'cardgame.rondacreada') {\n        this.router.navigate(['board', id]);\n      }\n    });\n    this.api.iniciarJuego({\n      juegoId: id\n    }).subscribe();\n  }\n\n  eliminar(id) {\n    this.ws.connect(id);\n    this.ws.subscribe(event => {\n      if (event.type == 'cardgame.juegoeliminado') {}\n\n      this.api.eliminarJuego({\n        juegoId: id\n      }).subscribe;\n    });\n  }\n\n};\nListGameComponent = __decorate([Component({\n  selector: 'app-list-game',\n  templateUrl: './list-game.component.html',\n  styleUrls: ['./list-game.component.scss']\n})], ListGameComponent);\nexport { ListGameComponent };","map":null,"metadata":{},"sourceType":"module"}